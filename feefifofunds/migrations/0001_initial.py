# Generated by Django 5.2.7 on 2025-10-30 16:09

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from decimal import Decimal
from django.db import migrations, models


# Performance tables that need composite PKs for TimescaleDB compatibility
PERFORMANCE_TABLES = [
    "feefifofunds_performance",
    "feefifofunds_crypto_performance",
    "feefifofunds_currency_performance",
    "feefifofunds_commodity_performance",
    "feefifofunds_inflation_data",
    "feefifofunds_savings_rate",
    "feefifofunds_property_valuation",
]


def convert_to_composite_pk(apps, schema_editor):
    """
    Convert performance tables from auto id to composite primary key.

    This is required for TimescaleDB hypertables, which must have the
    partitioning column (date) as part of the primary key.
    """
    if schema_editor.connection.vendor != "postgresql":
        print("Skipping composite PK setup (not using PostgreSQL)")
        return

    with schema_editor.connection.cursor() as cursor:
        for table_name in PERFORMANCE_TABLES:
            try:
                print(f"Converting {table_name} to composite primary key...")

                # Step 1: Drop the old primary key constraint
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    DROP CONSTRAINT IF EXISTS {table_name}_pkey CASCADE;
                """)

                # Step 2: Drop the id column
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    DROP COLUMN IF EXISTS id CASCADE;
                """)

                # Step 3: Create composite primary key
                # The unique constraint should already exist, so we convert it to PK
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    ADD PRIMARY KEY (asset_id, date, interval);
                """)

                print(f"✅ {table_name} now uses composite PK (asset_id, date, interval)")

            except Exception as e:
                print(f"⚠️  Failed to convert {table_name}: {e}")
                raise


def revert_to_auto_id(apps, schema_editor):
    """
    Revert to auto-incrementing id primary key.

    WARNING: This is a lossy operation if you have TimescaleDB hypertables enabled.
    """
    if schema_editor.connection.vendor != "postgresql":
        return

    with schema_editor.connection.cursor() as cursor:
        for table_name in PERFORMANCE_TABLES:
            try:
                print(f"Reverting {table_name} to auto id...")

                # Drop composite PK
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    DROP CONSTRAINT IF EXISTS {table_name}_pkey;
                """)

                # Add back id column
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    ADD COLUMN id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY;
                """)

                # Recreate unique constraint
                cursor.execute(f"""
                    ALTER TABLE {table_name}
                    ADD CONSTRAINT {table_name}_asset_date_interval_uniq
                    UNIQUE (asset_id, date, interval);
                """)

                print(f"✅ {table_name} reverted to auto id")

            except Exception as e:
                print(f"⚠️  Failed to revert {table_name}: {e}")
                raise


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
    ]

    operations = [
        migrations.CreateModel(
            name='Asset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('ticker', models.CharField(db_index=True, help_text='Primary ticker symbol or identifier', max_length=20, unique=True)),
                ('name', models.CharField(db_index=True, help_text='Full asset name', max_length=255)),
                ('slug', models.SlugField(blank=True, help_text='URL-friendly slug', max_length=255, unique=True)),
                ('description', models.TextField(blank=True, help_text='Asset description and details')),
                ('current_value', models.DecimalField(blank=True, decimal_places=4, help_text='Most recent price/value/rate', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('previous_value', models.DecimalField(blank=True, decimal_places=4, help_text='Previous value for change calculation', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('quote_currency', models.CharField(default='USD', help_text='Currency code for quotes/prices (ISO 4217)', max_length=3)),
                ('website', models.URLField(blank=True, help_text='Official website', max_length=500)),
                ('last_updated', models.DateTimeField(blank=True, help_text='When the asset data was last updated from external sources', null=True)),
                ('data_source', models.CharField(blank=True, help_text='Primary data source for this asset', max_length=50)),
                ('polymorphic_ctype', models.ForeignKey(editable=False, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='polymorphic_%(app_label)s.%(class)s_set+', to='contenttypes.contenttype')),
            ],
            options={
                'verbose_name': 'Asset',
                'verbose_name_plural': 'Assets',
                'db_table': 'feefifofunds_asset',
                'ordering': ['ticker'],
            },
        ),
        migrations.CreateModel(
            name='Fund',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('fund_type', models.CharField(choices=[('ETF', 'Exchange-Traded Fund'), ('MUTUAL', 'Mutual Fund'), ('INDEX', 'Index Fund'), ('BOND', 'Bond Fund'), ('MM', 'Money Market Fund'), ('TARGET', 'Target Date Fund'), ('OTHER', 'Other')], db_index=True, default='ETF', help_text='Type of fund', max_length=10)),
                ('asset_class', models.CharField(choices=[('EQUITY', 'Equity'), ('BOND', 'Fixed Income'), ('MIXED', 'Mixed/Balanced'), ('MM', 'Money Market'), ('COMMODITY', 'Commodity'), ('REIT', 'Real Estate'), ('ALT', 'Alternative')], db_index=True, default='EQUITY', help_text='Primary asset class', max_length=20)),
                ('category', models.CharField(blank=True, db_index=True, help_text='Morningstar or similar category', max_length=100)),
                ('inception_date', models.DateField(blank=True, help_text='Date when the fund was launched', null=True)),
                ('issuer', models.CharField(blank=True, db_index=True, help_text='Fund issuer/provider (e.g., Vanguard, iShares)', max_length=255)),
                ('expense_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Annual expense ratio as a percentage (e.g., 0.03 for 0.03%)', max_digits=6, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000')), django.core.validators.MaxValueValidator(Decimal('99.9999'))])),
                ('management_fee', models.DecimalField(blank=True, decimal_places=4, help_text='Management fee as a percentage', max_digits=6, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000')), django.core.validators.MaxValueValidator(Decimal('99.9999'))])),
                ('front_load', models.DecimalField(blank=True, decimal_places=4, help_text='Front-end load fee as a percentage', max_digits=6, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000')), django.core.validators.MaxValueValidator(Decimal('99.9999'))])),
                ('back_load', models.DecimalField(blank=True, decimal_places=4, help_text='Back-end load fee as a percentage', max_digits=6, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000')), django.core.validators.MaxValueValidator(Decimal('99.9999'))])),
                ('aum', models.DecimalField(blank=True, decimal_places=2, help_text='Assets Under Management in millions', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('avg_volume', models.BigIntegerField(blank=True, help_text='Average daily trading volume (shares)', null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('exchange', models.CharField(blank=True, help_text='Primary exchange where the fund trades', max_length=50)),
                ('isin', models.CharField(blank=True, help_text='International Securities Identification Number', max_length=12, null=True, unique=True)),
                ('cusip', models.CharField(blank=True, help_text='Committee on Uniform Securities Identification Procedures number', max_length=9)),
                ('last_price_update', models.DateTimeField(blank=True, help_text='When the price was last updated', null=True)),
            ],
            options={
                'verbose_name': 'Fund',
                'verbose_name_plural': 'Funds',
                'db_table': 'feefifofunds_fund',
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='InflationIndex',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('index_type', models.CharField(choices=[('CPI', 'Consumer Price Index'), ('CORE_CPI', 'Core CPI (excl. food & energy)'), ('PPI', 'Producer Price Index'), ('PCE', 'Personal Consumption Expenditures'), ('CORE_PCE', 'Core PCE'), ('GDP_DEF', 'GDP Deflator'), ('IMP', 'Import Price Index'), ('EXP', 'Export Price Index'), ('OTHER', 'Other')], db_index=True, help_text='Type of inflation index', max_length=10)),
                ('base_year', models.IntegerField(help_text='Base year for index calculation (e.g., 1982, 2015)')),
                ('geographic_region', models.CharField(db_index=True, help_text='Geographic region (e.g., US, EU, UK, Global)', max_length=100)),
                ('frequency', models.CharField(choices=[('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('ANNUAL', 'Annual')], default='MONTHLY', help_text='Reporting frequency', max_length=10)),
                ('seasonal_adjustment', models.BooleanField(default=True, help_text='Whether index is seasonally adjusted')),
            ],
            options={
                'verbose_name': 'Inflation Index',
                'verbose_name_plural': 'Inflation Indices',
                'db_table': 'feefifofunds_inflation',
                'ordering': ['geographic_region', 'index_type'],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='RealEstate',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('property_type', models.CharField(choices=[('RES', 'Residential Property'), ('COM', 'Commercial Property'), ('IND', 'Industrial Property'), ('REIT', 'Real Estate Investment Trust'), ('INDEX', 'Real Estate Index'), ('LAND', 'Land'), ('MIXED', 'Mixed Use'), ('OTHER', 'Other')], db_index=True, help_text='Type of real estate asset', max_length=10)),
                ('location_city', models.CharField(blank=True, db_index=True, help_text='City or locality', max_length=100)),
                ('location_state', models.CharField(blank=True, db_index=True, help_text='State or province', max_length=100)),
                ('location_country', models.CharField(db_index=True, default='USA', help_text='Country code (ISO 3166-1 alpha-3)', max_length=3)),
                ('square_footage', models.IntegerField(blank=True, help_text='Total square footage', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('purchase_date', models.DateField(blank=True, help_text='Date of purchase', null=True)),
                ('purchase_price', models.DecimalField(blank=True, decimal_places=2, help_text='Original purchase price', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('is_index', models.BooleanField(db_index=True, default=False, help_text='True if this represents a real estate index (e.g., Case-Shiller, FHFA)')),
            ],
            options={
                'verbose_name': 'Real Estate',
                'verbose_name_plural': 'Real Estate',
                'db_table': 'feefifofunds_realestate',
                'ordering': ['location_country', 'location_state', 'location_city'],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='SavingsAccount',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('institution_name', models.CharField(db_index=True, help_text='Financial institution name', max_length=255)),
                ('account_type', models.CharField(choices=[('SAVINGS', 'Savings Account'), ('HYSA', 'High-Yield Savings Account'), ('MM', 'Money Market Account'), ('CD', 'Certificate of Deposit'), ('CHECKING', 'Interest-Bearing Checking'), ('OTHER', 'Other')], db_index=True, default='SAVINGS', help_text='Type of account', max_length=10)),
                ('minimum_balance', models.DecimalField(blank=True, decimal_places=2, help_text='Minimum balance requirement', max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('term_length_months', models.IntegerField(blank=True, help_text='Term length in months (for CDs)', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('fdic_insured', models.BooleanField(default=True, help_text='FDIC insured (or equivalent)')),
            ],
            options={
                'verbose_name': 'Savings Account',
                'verbose_name_plural': 'Savings Accounts',
                'db_table': 'feefifofunds_savings',
                'ordering': ['institution_name', 'account_type'],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='CommodityMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sharpe ratio', max_digits=8, null=True)),
                ('sortino_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sortino ratio', max_digits=8, null=True)),
                ('current_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Current drawdown from peak', max_digits=10, null=True)),
                ('win_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Percentage of positive return periods', max_digits=6, null=True)),
                ('best_day', models.DecimalField(blank=True, decimal_places=4, help_text='Best single-day return', max_digits=10, null=True)),
                ('worst_day', models.DecimalField(blank=True, decimal_places=4, help_text='Worst single-day return', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Commodity Metrics',
                'verbose_name_plural': 'Commodity Metrics',
                'db_table': 'feefifofunds_commodity_metrics',
            },
        ),
        migrations.CreateModel(
            name='CommodityPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('spot_price', models.DecimalField(blank=True, decimal_places=8, help_text='Spot price', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('futures_price', models.DecimalField(blank=True, decimal_places=8, help_text='Futures price (if applicable)', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('open_price', models.DecimalField(blank=True, decimal_places=8, help_text='Opening price', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('high_price', models.DecimalField(blank=True, decimal_places=8, help_text='High price', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('low_price', models.DecimalField(blank=True, decimal_places=8, help_text='Low price', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('close_price', models.DecimalField(blank=True, decimal_places=8, help_text='Closing price', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('volume', models.BigIntegerField(blank=True, help_text='Trading volume (contracts or units)', null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('open_interest', models.BigIntegerField(blank=True, help_text='Open interest (for futures)', null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('daily_return', models.DecimalField(blank=True, decimal_places=6, help_text='Daily return as a decimal', max_digits=10, null=True)),
                ('log_return', models.DecimalField(blank=True, decimal_places=6, help_text='Natural log return', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Commodity Performance',
                'verbose_name_plural': 'Commodity Performance Records',
                'db_table': 'feefifofunds_commodity_performance',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='CryptoMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sharpe ratio (return per unit of risk)', max_digits=8, null=True)),
                ('sortino_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sortino ratio (return per unit of downside risk)', max_digits=8, null=True)),
                ('max_drawdown_duration', models.IntegerField(blank=True, help_text='Duration of maximum drawdown in days', null=True)),
                ('current_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Current drawdown from peak as a percentage', max_digits=10, null=True)),
                ('correlation_to_btc', models.DecimalField(blank=True, decimal_places=4, help_text='Correlation coefficient to Bitcoin (-1 to 1)', max_digits=6, null=True)),
                ('win_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Percentage of positive return periods', max_digits=6, null=True)),
                ('best_day', models.DecimalField(blank=True, decimal_places=4, help_text='Best single-day return as a percentage', max_digits=10, null=True)),
                ('worst_day', models.DecimalField(blank=True, decimal_places=4, help_text='Worst single-day return as a percentage', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Crypto Metrics',
                'verbose_name_plural': 'Crypto Metrics',
                'db_table': 'feefifofunds_crypto_metrics',
            },
        ),
        migrations.CreateModel(
            name='CryptoPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('open_price', models.DecimalField(blank=True, decimal_places=8, help_text='Opening price for the period', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('high_price', models.DecimalField(blank=True, decimal_places=8, help_text='Highest price during the period', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('low_price', models.DecimalField(blank=True, decimal_places=8, help_text='Lowest price during the period', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('close_price', models.DecimalField(decimal_places=8, help_text='Closing price for the period', max_digits=20, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('volume_24h', models.DecimalField(blank=True, decimal_places=2, help_text='24-hour trading volume in USD', max_digits=25, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('volume_crypto', models.DecimalField(blank=True, decimal_places=8, help_text='24-hour trading volume in cryptocurrency units', max_digits=30, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('market_cap', models.DecimalField(blank=True, decimal_places=2, help_text='Market capitalization in USD', max_digits=25, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('total_value_locked', models.DecimalField(blank=True, decimal_places=2, help_text='Total Value Locked (for DeFi tokens)', max_digits=25, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('daily_return', models.DecimalField(blank=True, decimal_places=6, help_text='Daily return as a decimal', max_digits=10, null=True)),
                ('log_return', models.DecimalField(blank=True, decimal_places=6, help_text='Natural log return', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Crypto Performance',
                'verbose_name_plural': 'Crypto Performance Records',
                'db_table': 'feefifofunds_crypto_performance',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='CurrencyMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sharpe ratio', max_digits=8, null=True)),
                ('current_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Current drawdown from peak as a percentage', max_digits=10, null=True)),
                ('win_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Percentage of positive return periods', max_digits=6, null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Currency Metrics',
                'verbose_name_plural': 'Currency Metrics',
                'db_table': 'feefifofunds_currency_metrics',
            },
        ),
        migrations.CreateModel(
            name='CurrencyPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('exchange_rate', models.DecimalField(decimal_places=8, help_text='Exchange rate (how much base currency per unit)', max_digits=20, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('bid_price', models.DecimalField(blank=True, decimal_places=8, help_text='Bid price (buy price)', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('ask_price', models.DecimalField(blank=True, decimal_places=8, help_text='Ask price (sell price)', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('spread', models.DecimalField(blank=True, decimal_places=8, help_text='Bid-ask spread', max_digits=12, null=True)),
                ('daily_return', models.DecimalField(blank=True, decimal_places=6, help_text='Daily return as a decimal', max_digits=10, null=True)),
                ('log_return', models.DecimalField(blank=True, decimal_places=6, help_text='Natural log return', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Currency Performance',
                'verbose_name_plural': 'Currency Performance Records',
                'db_table': 'feefifofunds_currency_performance',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='DataSource',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('name', models.CharField(db_index=True, help_text="Name of the data source (e.g., 'alpha_vantage', 'polygon', 'finnhub')", max_length=100, unique=True)),
                ('display_name', models.CharField(help_text='Display name for UI', max_length=255)),
                ('source_type', models.CharField(choices=[('API', 'REST API'), ('WS', 'WebSocket'), ('FILE', 'File Upload'), ('SCRAPER', 'Web Scraper'), ('DB', 'Database')], default='API', help_text='Type of data source', max_length=10)),
                ('description', models.TextField(blank=True, help_text='Description of this data source and what it provides')),
                ('base_url', models.URLField(blank=True, help_text='Base URL for API', max_length=500)),
                ('api_key_required', models.BooleanField(default=False, help_text='Whether this source requires an API key')),
                ('documentation_url', models.URLField(blank=True, help_text='URL to API documentation', max_length=500)),
                ('rate_limit_requests', models.IntegerField(blank=True, help_text='Maximum number of requests allowed', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('rate_limit_period_seconds', models.IntegerField(blank=True, help_text='Time period for rate limit in seconds', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('requests_today', models.IntegerField(default=0, help_text='Number of requests made today', validators=[django.core.validators.MinValueValidator(0)])),
                ('last_request_time', models.DateTimeField(blank=True, help_text='Timestamp of last request', null=True)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('ERROR', 'Error'), ('RATE_LIMITED', 'Rate Limited'), ('MAINTENANCE', 'Under Maintenance')], db_index=True, default='ACTIVE', help_text='Current status of the data source', max_length=20)),
                ('last_successful_sync', models.DateTimeField(blank=True, help_text='Timestamp of last successful data sync', null=True)),
                ('last_error', models.TextField(blank=True, help_text='Last error message encountered')),
                ('last_error_time', models.DateTimeField(blank=True, help_text='Timestamp of last error', null=True)),
                ('consecutive_failures', models.IntegerField(default=0, help_text='Number of consecutive failures', validators=[django.core.validators.MinValueValidator(0)])),
                ('priority', models.IntegerField(db_index=True, default=50, help_text='Priority for this source (1-100, higher = more preferred)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(100)])),
                ('reliability_score', models.DecimalField(decimal_places=2, default=100.0, help_text='Reliability score (0-100) based on historical success rate', max_digits=5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(100.0)])),
                ('supports_historical_data', models.BooleanField(default=True, help_text='Whether this source provides historical data')),
                ('supports_realtime_data', models.BooleanField(default=False, help_text='Whether this source provides real-time data')),
                ('supports_holdings', models.BooleanField(default=False, help_text='Whether this source provides holdings data')),
                ('supports_fundamentals', models.BooleanField(default=False, help_text='Whether this source provides fundamental data')),
                ('is_free', models.BooleanField(default=True, help_text='Whether this source is free to use')),
                ('monthly_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Monthly cost in USD', max_digits=10, null=True)),
            ],
            options={
                'verbose_name': 'Data Source',
                'verbose_name_plural': 'Data Sources',
                'db_table': 'feefifofunds_datasource',
                'ordering': ['-priority', 'name'],
                'indexes': [models.Index(fields=['-priority', 'status'], name='feefifofund_priorit_8f7ccc_idx'), models.Index(fields=['status', '-last_successful_sync'], name='feefifofund_status_35c83b_idx')],
            },
        ),
        migrations.CreateModel(
            name='DataSync',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('sync_type', models.CharField(choices=[('FUND_INFO', 'Fund Information'), ('PRICES', 'Price Data'), ('HOLDINGS', 'Holdings'), ('FUNDAMENTALS', 'Fundamental Data'), ('METRICS', 'Calculated Metrics')], db_index=True, help_text='Type of data being synced', max_length=20)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('IN_PROGRESS', 'In Progress'), ('SUCCESS', 'Success'), ('PARTIAL', 'Partial Success'), ('FAILED', 'Failed')], db_index=True, default='PENDING', help_text='Status of the sync', max_length=20)),
                ('started_at', models.DateTimeField(auto_now_add=True, help_text='When the sync started')),
                ('completed_at', models.DateTimeField(blank=True, help_text='When the sync completed', null=True)),
                ('duration_seconds', models.IntegerField(blank=True, help_text='Duration of sync in seconds', null=True)),
                ('records_fetched', models.IntegerField(default=0, help_text='Number of records fetched', validators=[django.core.validators.MinValueValidator(0)])),
                ('records_created', models.IntegerField(default=0, help_text='Number of new records created', validators=[django.core.validators.MinValueValidator(0)])),
                ('records_updated', models.IntegerField(default=0, help_text='Number of existing records updated', validators=[django.core.validators.MinValueValidator(0)])),
                ('records_failed', models.IntegerField(default=0, help_text='Number of records that failed validation', validators=[django.core.validators.MinValueValidator(0)])),
                ('error_message', models.TextField(blank=True, help_text='Error message if sync failed')),
                ('error_details', models.JSONField(blank=True, default=dict, help_text='Detailed error information (structured data)')),
                ('request_params', models.JSONField(blank=True, default=dict, help_text='Parameters used for the request')),
                ('response_metadata', models.JSONField(blank=True, default=dict, help_text='Metadata from the API response')),
                ('celery_task_id', models.CharField(blank=True, db_index=True, help_text='Celery task ID if run asynchronously', max_length=255)),
                ('data_source', models.ForeignKey(help_text='Data source used for this sync', on_delete=django.db.models.deletion.CASCADE, related_name='sync_history', to='feefifofunds.datasource')),
            ],
            options={
                'verbose_name': 'Data Sync',
                'verbose_name_plural': 'Data Syncs',
                'db_table': 'feefifofunds_datasync',
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='FundMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('downside_deviation', models.DecimalField(blank=True, decimal_places=4, help_text='Downside deviation (only negative returns)', max_digits=10, null=True)),
                ('beta', models.DecimalField(blank=True, decimal_places=4, help_text='Beta relative to benchmark (e.g., S&P 500)', max_digits=8, null=True)),
                ('alpha', models.DecimalField(blank=True, decimal_places=4, help_text='Alpha (excess return) as a percentage', max_digits=10, null=True)),
                ('r_squared', models.DecimalField(blank=True, decimal_places=4, help_text='R-squared (0.0 to 1.0) - correlation to benchmark', max_digits=6, null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sharpe ratio (return per unit of risk)', max_digits=8, null=True)),
                ('sortino_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sortino ratio (return per unit of downside risk)', max_digits=8, null=True)),
                ('treynor_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Treynor ratio (return per unit of systematic risk)', max_digits=10, null=True)),
                ('information_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Information ratio (active return / tracking error)', max_digits=8, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('max_drawdown_duration', models.IntegerField(blank=True, help_text='Duration of maximum drawdown in days', null=True)),
                ('current_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Current drawdown from peak as a percentage', max_digits=10, null=True)),
                ('var_95', models.DecimalField(blank=True, decimal_places=4, help_text='Value at Risk at 95% confidence (1-day)', max_digits=10, null=True)),
                ('var_99', models.DecimalField(blank=True, decimal_places=4, help_text='Value at Risk at 99% confidence (1-day)', max_digits=10, null=True)),
                ('cvar_95', models.DecimalField(blank=True, decimal_places=4, help_text='Conditional VaR (expected shortfall) at 95%', max_digits=10, null=True)),
                ('win_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Percentage of positive return periods', max_digits=6, null=True)),
                ('best_day', models.DecimalField(blank=True, decimal_places=4, help_text='Best single-day return as a percentage', max_digits=10, null=True)),
                ('worst_day', models.DecimalField(blank=True, decimal_places=4, help_text='Worst single-day return as a percentage', max_digits=10, null=True)),
                ('avg_positive_day', models.DecimalField(blank=True, decimal_places=4, help_text='Average return on positive days', max_digits=10, null=True)),
                ('avg_negative_day', models.DecimalField(blank=True, decimal_places=4, help_text='Average return on negative days', max_digits=10, null=True)),
                ('benchmark_ticker', models.CharField(blank=True, help_text="Benchmark used for comparison (e.g., 'SPY' for S&P 500)", max_length=20)),
                ('excess_return', models.DecimalField(blank=True, decimal_places=4, help_text='Return above benchmark', max_digits=10, null=True)),
                ('tracking_error', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of excess returns', max_digits=10, null=True)),
                ('skewness', models.DecimalField(blank=True, decimal_places=4, help_text='Skewness of return distribution', max_digits=8, null=True)),
                ('kurtosis', models.DecimalField(blank=True, decimal_places=4, help_text='Kurtosis of return distribution', max_digits=8, null=True)),
                ('risk_score', models.IntegerField(blank=True, help_text='Risk score (0-100, higher = more risk)', null=True)),
                ('return_score', models.IntegerField(blank=True, help_text='Return score (0-100, higher = better returns)', null=True)),
                ('overall_score', models.IntegerField(blank=True, db_index=True, help_text='Overall composite score (0-100)', null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Fund Metrics',
                'verbose_name_plural': 'Fund Metrics',
                'db_table': 'feefifofunds_metrics',
                'ordering': ['-calculation_date'],
            },
        ),
        migrations.CreateModel(
            name='FundPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('open_price', models.DecimalField(blank=True, decimal_places=4, help_text='Opening price for the period', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('high_price', models.DecimalField(blank=True, decimal_places=4, help_text='Highest price during the period', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('low_price', models.DecimalField(blank=True, decimal_places=4, help_text='Lowest price during the period', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('close_price', models.DecimalField(decimal_places=4, help_text='Closing price (or NAV) for the period', max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('adjusted_close', models.DecimalField(blank=True, decimal_places=4, help_text='Adjusted closing price (accounting for splits, dividends)', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('volume', models.BigIntegerField(blank=True, help_text='Trading volume (number of shares)', null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('dollar_volume', models.DecimalField(blank=True, decimal_places=2, help_text='Dollar volume (volume * price)', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('dividend', models.DecimalField(blank=True, decimal_places=4, default=Decimal('0.0000'), help_text='Dividend paid on this date', max_digits=10, null=True)),
                ('split_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Stock split ratio (e.g., 2.0 for 2:1 split)', max_digits=10, null=True)),
                ('daily_return', models.DecimalField(blank=True, decimal_places=6, help_text='Daily return as a decimal (e.g., 0.015 for 1.5%)', max_digits=10, null=True)),
                ('log_return', models.DecimalField(blank=True, decimal_places=6, help_text='Natural log return for statistical calculations', max_digits=10, null=True)),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Fund Performance',
                'verbose_name_plural': 'Fund Performance Records',
                'db_table': 'feefifofunds_performance',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='InflationData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('index_value', models.DecimalField(decimal_places=4, help_text='Index value (e.g., CPI value)', max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('annual_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Year-over-year inflation rate as percentage', max_digits=8, null=True)),
                ('monthly_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Month-over-month inflation rate as percentage', max_digits=8, null=True)),
                ('core_index_value', models.DecimalField(blank=True, decimal_places=4, help_text='Core index value (excluding volatile components)', max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Inflation Data',
                'verbose_name_plural': 'Inflation Data Records',
                'db_table': 'feefifofunds_inflation_data',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='InflationMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('average_annual_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Average annual inflation rate for period', max_digits=8, null=True)),
                ('cumulative_inflation', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative inflation since base year (%)', max_digits=10, null=True)),
                ('purchasing_power_change', models.DecimalField(blank=True, decimal_places=4, help_text='Change in purchasing power (%)', max_digits=10, null=True)),
                ('trend_direction', models.CharField(blank=True, choices=[('INCREASING', 'Increasing'), ('DECREASING', 'Decreasing'), ('STABLE', 'Stable')], help_text='Trend direction of inflation', max_length=15)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Inflation Metrics',
                'verbose_name_plural': 'Inflation Metrics',
                'db_table': 'feefifofunds_inflation_metrics',
            },
        ),
        migrations.CreateModel(
            name='PropertyValuation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('assessed_value', models.DecimalField(blank=True, decimal_places=2, help_text='Tax assessed value', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('market_value', models.DecimalField(decimal_places=2, help_text='Market value or estimated price', max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('rental_income_monthly', models.DecimalField(blank=True, decimal_places=2, help_text='Monthly rental income', max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('occupancy_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Occupancy rate as percentage', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('valuation_method', models.CharField(choices=[('APPRAISAL', 'Professional Appraisal'), ('MARKET', 'Market Comparables'), ('INDEX', 'Real Estate Index'), ('ASSESSMENT', 'Tax Assessment'), ('AUTOMATED', 'Automated Valuation Model')], default='MARKET', help_text='Method used for this valuation', max_length=12)),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Property Valuation',
                'verbose_name_plural': 'Property Valuations',
                'db_table': 'feefifofunds_property_valuation',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='RealEstateMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('cap_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Capitalization rate (NOI / property value) %', max_digits=8, null=True)),
                ('cash_on_cash_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cash on cash return %', max_digits=8, null=True)),
                ('rental_yield', models.DecimalField(blank=True, decimal_places=4, help_text='Annual rental yield %', max_digits=8, null=True)),
                ('appreciation_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Annual appreciation rate %', max_digits=8, null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, help_text='Sharpe ratio (for indices/REITs)', max_digits=8, null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Real Estate Metrics',
                'verbose_name_plural': 'Real Estate Metrics',
                'db_table': 'feefifofunds_realestate_metrics',
            },
        ),
        migrations.CreateModel(
            name='SavingsMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('calculation_date', models.DateField(db_index=True, help_text='Date when these metrics were calculated')),
                ('time_frame', models.CharField(choices=[('1M', '1 Month'), ('3M', '3 Months'), ('6M', '6 Months'), ('YTD', 'Year-to-Date'), ('1Y', '1 Year'), ('3Y', '3 Years'), ('5Y', '5 Years'), ('10Y', '10 Years'), ('ALL', 'All Time')], db_index=True, default='1Y', help_text='Time frame for these metrics', max_length=3)),
                ('data_points', models.IntegerField(help_text='Number of data points used in calculations')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, help_text='Total return as a percentage', max_digits=10, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, help_text='Annualized return as a percentage', max_digits=10, null=True)),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, help_text='Cumulative return as a percentage', max_digits=10, null=True)),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, help_text='Standard deviation of returns (annualized %)', max_digits=10, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, help_text='Maximum drawdown as a percentage', max_digits=10, null=True)),
                ('calculation_engine_version', models.CharField(blank=True, help_text='Version of the calculation engine used', max_length=50)),
                ('calculation_duration_ms', models.IntegerField(blank=True, help_text='Time taken to calculate these metrics in milliseconds', null=True)),
                ('effective_annual_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Weighted average effective annual rate', max_digits=8, null=True)),
                ('total_interest_earned', models.DecimalField(blank=True, decimal_places=2, help_text='Total interest earned in period', max_digits=15, null=True)),
                ('real_return', models.DecimalField(blank=True, decimal_places=4, help_text='Real return after inflation adjustment (%)', max_digits=10, null=True)),
                ('rate_stability_score', models.IntegerField(blank=True, help_text='Rate stability score (0-100, higher = more stable)', null=True)),
                ('asset', models.ForeignKey(help_text='The asset these metrics belong to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_records', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Savings Metrics',
                'verbose_name_plural': 'Savings Metrics',
                'db_table': 'feefifofunds_savings_metrics',
            },
        ),
        migrations.CreateModel(
            name='SavingsRateHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('date', models.DateField(db_index=True, help_text='Date of this performance record')),
                ('interval', models.CharField(choices=[('1D', 'Daily'), ('1W', 'Weekly'), ('1M', 'Monthly'), ('1Q', 'Quarterly'), ('1Y', 'Yearly')], default='1D', help_text='Time interval for this data point', max_length=2)),
                ('value', models.DecimalField(blank=True, decimal_places=8, help_text='Generic value (price, rate, index, etc.)', max_digits=20, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this data', max_length=50)),
                ('data_quality_score', models.IntegerField(blank=True, help_text='Data quality score (0-100)', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MinValueValidator(100)])),
                ('annual_percentage_yield', models.DecimalField(decimal_places=4, help_text='Annual Percentage Yield (APY)', max_digits=8, validators=[django.core.validators.MinValueValidator(Decimal('0.0000'))])),
                ('interest_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Nominal interest rate', max_digits=8, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000'))])),
                ('compounding_frequency', models.CharField(choices=[('DAILY', 'Daily'), ('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('ANNUALLY', 'Annually')], default='MONTHLY', help_text='Compounding frequency', max_length=10)),
                ('effective_rate', models.DecimalField(blank=True, decimal_places=4, help_text='Calculated effective annual rate', max_digits=8, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0000'))])),
                ('asset', models.ForeignKey(help_text='The asset this performance data belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_history', to='feefifofunds.asset')),
            ],
            options={
                'verbose_name': 'Savings Rate History',
                'verbose_name_plural': 'Savings Rate History',
                'db_table': 'feefifofunds_savings_rate',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='Commodity',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('commodity_type', models.CharField(choices=[('ENERGY', 'Energy (Oil, Gas, etc.)'), ('PRECIOUS', 'Precious Metals (Gold, Silver, etc.)'), ('INDUSTRIAL', 'Industrial Metals (Copper, Aluminum, etc.)'), ('AGRICULTURE', 'Agriculture (Wheat, Corn, etc.)'), ('LIVESTOCK', 'Livestock (Cattle, Hogs, etc.)'), ('SOFT', 'Soft Commodities (Coffee, Cotton, Sugar, etc.)'), ('OTHER', 'Other')], db_index=True, help_text='Type of commodity', max_length=12)),
                ('unit_of_measure', models.CharField(choices=[('BBL', 'Barrel'), ('OZ_T', 'Troy Ounce'), ('MT', 'Metric Ton'), ('BU', 'Bushel'), ('LB', 'Pound'), ('GAL', 'Gallon'), ('MMBTU', 'Million BTU'), ('OTHER', 'Other')], help_text='Unit of measure for pricing', max_length=10)),
                ('trading_exchange', models.CharField(blank=True, db_index=True, help_text='Primary trading exchange (e.g., NYMEX, COMEX, CBOT)', max_length=100)),
                ('contract_symbol', models.CharField(blank=True, help_text='Futures contract symbol', max_length=20)),
                ('contract_month', models.CharField(blank=True, help_text="Contract month for futures (e.g., 'Dec 2025', 'Z25')", max_length=10)),
                ('contract_size', models.CharField(blank=True, help_text="Standard contract size (e.g., '1,000 barrels', '100 troy oz')", max_length=100)),
                ('grade', models.CharField(blank=True, help_text="Grade or quality specification (e.g., 'WTI', 'Brent', '.999 fine')", max_length=100)),
                ('is_spot_price', models.BooleanField(default=True, help_text='True if tracking spot price, False if tracking futures')),
            ],
            options={
                'verbose_name': 'Commodity',
                'verbose_name_plural': 'Commodities',
                'db_table': 'feefifofunds_commodity',
                'ordering': ['commodity_type', 'ticker'],
                'indexes': [models.Index(fields=['commodity_type', 'trading_exchange'], name='feefifofund_commodi_b5205c_idx'), models.Index(fields=['trading_exchange'], name='feefifofund_trading_c6df54_idx'), models.Index(fields=['is_spot_price'], name='feefifofund_is_spot_aa48b0_idx')],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='Crypto',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('blockchain', models.CharField(choices=[('BTC', 'Bitcoin'), ('ETH', 'Ethereum'), ('BSC', 'Binance Smart Chain'), ('SOL', 'Solana'), ('ADA', 'Cardano'), ('MATIC', 'Polygon'), ('AVAX', 'Avalanche'), ('DOT', 'Polkadot'), ('ATOM', 'Cosmos'), ('ARB', 'Arbitrum'), ('OP', 'Optimism'), ('BASE', 'Base'), ('OTHER', 'Other')], db_index=True, help_text='Primary blockchain network', max_length=10)),
                ('token_type', models.CharField(choices=[('COIN', 'Native Coin'), ('TOKEN', 'Token'), ('STABLE', 'Stablecoin'), ('DEFI', 'DeFi Token'), ('NFT', 'NFT Collection'), ('GOV', 'Governance Token'), ('WRAPPED', 'Wrapped Token'), ('OTHER', 'Other')], db_index=True, default='COIN', help_text='Type of crypto asset', max_length=10)),
                ('contract_address', models.CharField(blank=True, help_text='Smart contract address (for tokens)', max_length=255)),
                ('max_supply', models.DecimalField(blank=True, decimal_places=8, help_text='Maximum supply (if capped)', max_digits=30, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('circulating_supply', models.DecimalField(blank=True, decimal_places=8, help_text='Current circulating supply', max_digits=30, null=True, validators=[django.core.validators.MinValueValidator(Decimal('1E-8'))])),
                ('market_cap_rank', models.IntegerField(blank=True, help_text='Market capitalization ranking', null=True, validators=[django.core.validators.MinValueValidator(1)])),
                ('consensus_mechanism', models.CharField(blank=True, choices=[('POW', 'Proof of Work'), ('POS', 'Proof of Stake'), ('DPOS', 'Delegated Proof of Stake'), ('POA', 'Proof of Authority'), ('POH', 'Proof of History'), ('HYBRID', 'Hybrid'), ('OTHER', 'Other')], help_text='Consensus mechanism used', max_length=10)),
            ],
            options={
                'verbose_name': 'Cryptocurrency',
                'verbose_name_plural': 'Cryptocurrencies',
                'db_table': 'feefifofunds_crypto',
                'ordering': ['market_cap_rank', 'ticker'],
                'indexes': [models.Index(fields=['blockchain', 'token_type'], name='feefifofund_blockch_614e37_idx'), models.Index(fields=['market_cap_rank'], name='feefifofund_market__2239b2_idx')],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='Currency',
            fields=[
                ('asset_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='feefifofunds.asset')),
                ('currency_code', models.CharField(db_index=True, help_text='ISO 4217 currency code (e.g., USD, EUR, GBP)', max_length=3)),
                ('base_currency', models.CharField(db_index=True, default='USD', help_text='Base currency for exchange rate (usually USD)', max_length=3)),
                ('currency_type', models.CharField(choices=[('FIAT', 'Fiat Currency'), ('DIGITAL', 'Digital Currency (non-crypto)'), ('COMMODITY', 'Commodity-backed Currency')], default='FIAT', help_text='Type of currency', max_length=10)),
                ('country', models.CharField(blank=True, db_index=True, help_text='Primary country/region for this currency', max_length=100)),
                ('central_bank', models.CharField(blank=True, help_text='Central bank or monetary authority', max_length=255)),
                ('is_major_currency', models.BooleanField(default=False, help_text='True if this is a major trading currency (USD, EUR, JPY, GBP, etc.)')),
                ('is_reserve_currency', models.BooleanField(default=False, help_text='True if this is a global reserve currency')),
            ],
            options={
                'verbose_name': 'Currency',
                'verbose_name_plural': 'Currencies',
                'db_table': 'feefifofunds_currency',
                'ordering': ['currency_code'],
                'indexes': [models.Index(fields=['currency_code', 'base_currency'], name='feefifofund_currenc_6f2287_idx'), models.Index(fields=['country'], name='feefifofund_country_db3c1a_idx'), models.Index(fields=['is_major_currency'], name='feefifofund_is_majo_0d988b_idx')],
            },
            bases=('feefifofunds.asset',),
        ),
        migrations.CreateModel(
            name='FundHolding',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, editable=False, help_text='Timestamp when this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when this record was last updated')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this record is active')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when this record was soft-deleted', null=True)),
                ('ticker', models.CharField(db_index=True, help_text='Ticker symbol of the holding', max_length=20)),
                ('name', models.CharField(help_text='Full name of the holding', max_length=255)),
                ('cusip', models.CharField(blank=True, help_text='CUSIP identifier', max_length=9)),
                ('isin', models.CharField(blank=True, help_text='ISIN identifier', max_length=12)),
                ('holding_type', models.CharField(choices=[('EQUITY', 'Equity (Stock)'), ('BOND', 'Bond'), ('CASH', 'Cash & Equivalents'), ('OPTION', 'Option'), ('FUTURE', 'Future'), ('COMMODITY', 'Commodity'), ('REIT', 'Real Estate'), ('OTHER', 'Other')], db_index=True, default='EQUITY', help_text='Type of security', max_length=20)),
                ('sector', models.CharField(blank=True, db_index=True, help_text='Sector classification (e.g., Technology, Healthcare)', max_length=100)),
                ('industry', models.CharField(blank=True, help_text='Industry classification', max_length=100)),
                ('country', models.CharField(blank=True, db_index=True, help_text='Country code (ISO 3166-1 alpha-3)', max_length=3)),
                ('shares', models.DecimalField(blank=True, decimal_places=4, help_text='Number of shares held', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('market_value', models.DecimalField(blank=True, decimal_places=2, help_text='Market value of the position in fund currency', max_digits=20, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('weight', models.DecimalField(decimal_places=4, help_text='Portfolio weight as a percentage (e.g., 5.25 for 5.25%)', max_digits=8, validators=[django.core.validators.MinValueValidator(Decimal('0.0000')), django.core.validators.MaxValueValidator(Decimal('100.0000'))])),
                ('price', models.DecimalField(blank=True, decimal_places=4, help_text='Current price per share', max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))])),
                ('cost_basis', models.DecimalField(blank=True, decimal_places=4, help_text='Average cost basis per share', max_digits=15, null=True)),
                ('as_of_date', models.DateField(db_index=True, help_text='Date when this holding data was reported')),
                ('previous_weight', models.DecimalField(blank=True, decimal_places=4, help_text='Weight in previous reporting period', max_digits=8, null=True)),
                ('data_source', models.CharField(blank=True, help_text='Source of this holding data', max_length=50)),
                ('fund', models.ForeignKey(help_text='The fund that holds this security', on_delete=django.db.models.deletion.CASCADE, related_name='holdings', to='feefifofunds.fund')),
            ],
            options={
                'verbose_name': 'Fund Holding',
                'verbose_name_plural': 'Fund Holdings',
                'db_table': 'feefifofunds_holding',
                'ordering': ['-weight'],
            },
        ),
        migrations.AddIndex(
            model_name='fund',
            index=models.Index(fields=['fund_type', 'asset_class'], name='feefifofund_fund_ty_bb4cc7_idx'),
        ),
        migrations.AddIndex(
            model_name='fund',
            index=models.Index(fields=['category'], name='feefifofund_categor_2c367f_idx'),
        ),
        migrations.AddIndex(
            model_name='fund',
            index=models.Index(fields=['expense_ratio'], name='feefifofund_expense_ca2a54_idx'),
        ),
        migrations.AddField(
            model_name='datasync',
            name='fund',
            field=models.ForeignKey(blank=True, help_text='Fund this sync was for (if applicable)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sync_history', to='feefifofunds.fund'),
        ),
        migrations.AddIndex(
            model_name='inflationindex',
            index=models.Index(fields=['index_type', 'geographic_region'], name='feefifofund_index_t_3ec7a1_idx'),
        ),
        migrations.AddIndex(
            model_name='inflationindex',
            index=models.Index(fields=['geographic_region', 'frequency'], name='feefifofund_geograp_b16ded_idx'),
        ),
        migrations.AddIndex(
            model_name='realestate',
            index=models.Index(fields=['property_type', 'location_country'], name='feefifofund_propert_1087c6_idx'),
        ),
        migrations.AddIndex(
            model_name='realestate',
            index=models.Index(fields=['location_country', 'location_state', 'location_city'], name='feefifofund_locatio_3cffc5_idx'),
        ),
        migrations.AddIndex(
            model_name='realestate',
            index=models.Index(fields=['is_index'], name='feefifofund_is_inde_64757e_idx'),
        ),
        migrations.AddIndex(
            model_name='savingsaccount',
            index=models.Index(fields=['institution_name', 'account_type'], name='feefifofund_institu_4f0234_idx'),
        ),
        migrations.AddIndex(
            model_name='savingsaccount',
            index=models.Index(fields=['account_type'], name='feefifofund_account_299f6c_idx'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['ticker', 'is_active'], name='feefifofund_ticker_46d617_idx'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['name'], name='feefifofund_name_d69091_idx'),
        ),
        migrations.AddIndex(
            model_name='commoditymetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_2ea68f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='commoditymetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='commodityperformance',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_cdb4c8_idx'),
        ),
        migrations.AddIndex(
            model_name='commodityperformance',
            index=models.Index(fields=['date'], name='feefifofund_date_188651_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='commodityperformance',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='cryptometrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_89661a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='cryptometrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='cryptoperformance',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_d9ba6b_idx'),
        ),
        migrations.AddIndex(
            model_name='cryptoperformance',
            index=models.Index(fields=['date'], name='feefifofund_date_7b1690_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='cryptoperformance',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='currencymetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_72dfe5_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='currencymetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='currencyperformance',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_94c9d4_idx'),
        ),
        migrations.AddIndex(
            model_name='currencyperformance',
            index=models.Index(fields=['date'], name='feefifofund_date_14d561_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='currencyperformance',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='fundmetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_783c0d_idx'),
        ),
        migrations.AddIndex(
            model_name='fundmetrics',
            index=models.Index(fields=['asset', 'time_frame', '-calculation_date'], name='feefifofund_asset_i_ca5c21_idx'),
        ),
        migrations.AddIndex(
            model_name='fundmetrics',
            index=models.Index(fields=['-overall_score'], name='feefifofund_overall_6e5206_idx'),
        ),
        migrations.AddIndex(
            model_name='fundmetrics',
            index=models.Index(fields=['time_frame', '-overall_score'], name='feefifofund_time_fr_bbff30_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='fundmetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='fundperformance',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_5387fc_idx'),
        ),
        migrations.AddIndex(
            model_name='fundperformance',
            index=models.Index(fields=['asset', '-date', 'interval'], name='feefifofund_asset_i_827256_idx'),
        ),
        migrations.AddIndex(
            model_name='fundperformance',
            index=models.Index(fields=['date', 'asset'], name='feefifofund_date_4a5fc5_idx'),
        ),
        migrations.AddIndex(
            model_name='fundperformance',
            index=models.Index(fields=['interval', '-date'], name='feefifofund_interva_298103_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='fundperformance',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='inflationdata',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_09cc5f_idx'),
        ),
        migrations.AddIndex(
            model_name='inflationdata',
            index=models.Index(fields=['date'], name='feefifofund_date_21493b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='inflationdata',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='inflationmetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_a14877_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='inflationmetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='propertyvaluation',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_c7a6e9_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyvaluation',
            index=models.Index(fields=['date'], name='feefifofund_date_529784_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='propertyvaluation',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='realestatemetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_73f144_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='realestatemetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='savingsmetrics',
            index=models.Index(fields=['asset', '-calculation_date'], name='feefifofund_asset_i_696291_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='savingsmetrics',
            unique_together={('asset', 'calculation_date', 'time_frame')},
        ),
        migrations.AddIndex(
            model_name='savingsratehistory',
            index=models.Index(fields=['asset', '-date'], name='feefifofund_asset_i_48dcfb_idx'),
        ),
        migrations.AddIndex(
            model_name='savingsratehistory',
            index=models.Index(fields=['date'], name='feefifofund_date_91677a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='savingsratehistory',
            unique_together={('asset', 'date', 'interval')},
        ),
        migrations.AddIndex(
            model_name='fundholding',
            index=models.Index(fields=['fund', '-weight'], name='feefifofund_fund_id_6d29de_idx'),
        ),
        migrations.AddIndex(
            model_name='fundholding',
            index=models.Index(fields=['fund', 'as_of_date'], name='feefifofund_fund_id_c255f2_idx'),
        ),
        migrations.AddIndex(
            model_name='fundholding',
            index=models.Index(fields=['ticker', 'as_of_date'], name='feefifofund_ticker_004dd2_idx'),
        ),
        migrations.AddIndex(
            model_name='fundholding',
            index=models.Index(fields=['holding_type', '-weight'], name='feefifofund_holding_f6288f_idx'),
        ),
        migrations.AddIndex(
            model_name='fundholding',
            index=models.Index(fields=['sector', '-weight'], name='feefifofund_sector_31dbbe_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='fundholding',
            unique_together={('fund', 'ticker', 'as_of_date')},
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['-started_at'], name='feefifofund_started_294044_idx'),
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['data_source', '-started_at'], name='feefifofund_data_so_091d0a_idx'),
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['fund', '-started_at'], name='feefifofund_fund_id_413e49_idx'),
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['status', '-started_at'], name='feefifofund_status_c296cf_idx'),
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['sync_type', '-started_at'], name='feefifofund_sync_ty_11ac45_idx'),
        ),
        migrations.AddIndex(
            model_name='datasync',
            index=models.Index(fields=['celery_task_id'], name='feefifofund_celery__ffa9dd_idx'),
        ),
        migrations.RunPython(
            code=convert_to_composite_pk,
            reverse_code=revert_to_auto_id,
        ),
    ]
